(this["webpackJsonpreact-deploy"]=this["webpackJsonpreact-deploy"]||[]).push([[0],{22:function(e,a,t){e.exports=t(34)},27:function(e,a,t){},28:function(e,a,t){},34:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(14),o=t.n(l),c=(t(27),t(20)),s=t(15),m=t(16),i=t(19),d=t(21),u=(t(28),t(7)),p=t(5),E=function(e){var a="info";return 0===e?a="success":1===e&&(a="danger"),"badge badge-pill badge-"+a+" mr-1"};var h=function(e){var a=e.pin;return e.name,r.a.createElement("span",{className:E(a.state)},a.name)},v=function(e){var a=Math.floor(e/86400),t=Math.floor(e%86400/3600),n=Math.floor(e%86400%3600/60),r=e%60,l="";return a>=1&&(l+=a+"d "),t>=1&&(l+=" "+t+"h "),n>=1&&(l+=" "+n+"m "),r>1&&(l+=" "+r+"s"),""===l&&(l="n/a"),l},b=function(e){return(e/1e3).toFixed(2)+"s"},f=function(e){return(e/1e3).toFixed(2)+"k"},g=function(e){return 2*(e+100)+"%"},N=function(e,a){e=e||[];var t={},n={1:1,2:2,5:3,6:4,7:5,9:6};Object.keys(n).forEach((function(e,a){t[e]="?"})),e.forEach((function(e){t[e.pin]=e.state}));var r=Object.keys(t).map((function(e){return{pin:e,state:t[e]}}));return r.sort((function(e){return e.pin})),r.forEach((function(e,a){e.name=n[e.pin]})),r},w=function(e){var a=e.host,t=e.port;return r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://"+a+":"+t},a,":",t)};var y=function(e){var a=e.board;return a=a||{mac:"DATA MISSING"},r.a.createElement("div",{className:"card border-primary"},r.a.createElement("h5",{className:"card-header text-white bg-primary"},r.a.createElement("div",{className:"float-right"},a.t&&r.a.createElement("small",{className:"float-right font-weight-normal mt-1"},"(",b(a.t),")"),!a.t&&r.a.createElement("div",{className:"spinner-grow spinner-grow-sm text-light mr-3",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))),a.name),r.a.createElement("div",{className:"card-body"},r.a.createElement("dl",{className:"row mb-0"},r.a.createElement("dt",{className:"col-sm-4"},"MAC"),r.a.createElement("dd",{className:"col-sm-8"},a.mac),r.a.createElement("dt",{className:"col-sm-4"},"HOST"),r.a.createElement("dd",{className:"col-sm-8"},r.a.createElement(w,{host:a.ip,port:a.port})),r.a.createElement("dt",{className:"col-sm-4"},"WIFI"),r.a.createElement("dd",{className:"col-sm-8"},g(a.rssi)),r.a.createElement("dt",{className:"col-sm-4"},"UPTIME"),r.a.createElement("dd",{className:"col-sm-8"},v(a.uptime)),r.a.createElement("dt",{className:"col-sm-4"},"FREE"),r.a.createElement("dd",{className:"col-sm-8"},f(a.heap)))),r.a.createElement("div",{className:"card-footer"},N(a.sensors,6).map((function(e,a){return r.a.createElement(h,{pin:e,name:a+1,key:a})}))))};var k=function(e){var a=e.boards;return e.format,r.a.createElement("div",{className:"row row-cols-1 row-cols-md-2"},a.map((function(e,a){return r.a.createElement("div",{className:"col mb-4",key:a},r.a.createElement(y,{board:e}))})))};var M=function(e){var a=e.board;return a=a||{mac:"DATA MISSING"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},a.name),r.a.createElement("td",null,a.mac),r.a.createElement("td",null,r.a.createElement(w,{host:a.ip,port:a.port})),r.a.createElement("td",null,b(a.t)),r.a.createElement("td",null,g(a.rssi)),r.a.createElement("td",null,v(a.uptime)),r.a.createElement("td",null,f(a.heap)),r.a.createElement("td",null,N(a.sensors,6).map((function(e,a){return r.a.createElement(h,{pin:e,name:a+1,key:a})}))))};var x=function(e){var a=e.boards;return e.format,r.a.createElement("table",{className:"table table-hover"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"name"),r.a.createElement("th",{scope:"col"},"mac"),r.a.createElement("th",{scope:"col"},"host"),r.a.createElement("th",{scope:"col"},"t"),r.a.createElement("th",{scope:"col"},"wifi"),r.a.createElement("th",{scope:"col"},"uptime"),r.a.createElement("th",{scope:"col"},"free"),r.a.createElement("th",{scope:"col"},"sensors"))),r.a.createElement("tbody",null,a.map((function(e,a){return r.a.createElement(M,{board:e,key:a})}))))};var S=function(e){var a=e.boards,t=new URLSearchParams(Object(p.f)().search).get("v")||"card";return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"mb-4 text-right"},r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{type:"button",className:"btn btn-primary dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"View as ","card"===t?"Card":"Table"),r.a.createElement("div",{className:"dropdown-menu dropdown-menu-right"},r.a.createElement(u.b,{className:"dropdown-item",to:"/"},"Card ","card"===t&&r.a.createElement("span",{className:"text-primary"},"\u2022")),r.a.createElement(u.b,{className:"dropdown-item",to:"/?v=table"},"Table ","table"===t&&r.a.createElement("span",{className:"text-primary"},"\u2022"))))),"card"===t&&r.a.createElement(k,{boards:a}),"table"===t&&r.a.createElement(x,{boards:a}))};var B=function(){return r.a.createElement("div",null,"Board 1",r.a.createElement("ol",null,r.a.createElement("li",null,"Garage Door"),r.a.createElement("li",null,"Garage Motion")),"Board 2",r.a.createElement("ol",null,r.a.createElement("li",null,"Dining Room Motion")),"Board 3",r.a.createElement("ol",null,r.a.createElement("li",null,"Kitchen Motion")))};function j(e){var a=e.boards;return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement(u.c,{to:"/",className:"navbar-brand"},r.a.createElement("svg",{className:"bi bi-house-door align-text-top",width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",d:"M7.646 1.146a.5.5 0 01.708 0l6 6a.5.5 0 01.146.354v7a.5.5 0 01-.5.5H9.5a.5.5 0 01-.5-.5v-4H7v4a.5.5 0 01-.5.5H2a.5.5 0 01-.5-.5v-7a.5.5 0 01.146-.354l6-6zM2.5 7.707V14H6v-4a.5.5 0 01.5-.5h3a.5.5 0 01.5.5v4h3.5V7.707L8 2.207l-5.5 5.5z",clipRule:"evenodd"}),r.a.createElement("path",{fillRule:"evenodd",d:"M13 2.5V6l-2-2V2.5a.5.5 0 01.5-.5h1a.5.5 0 01.5.5z",clipRule:"evenodd"}))),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNavAltMarkup"},r.a.createElement("div",{className:"navbar-nav"},r.a.createElement(u.c,{to:"/info",className:"nav-item nav-link"},"Board Info")))),r.a.createElement("div",{className:"m-4"},r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/",children:r.a.createElement(S,{boards:a})}),r.a.createElement(p.a,{path:"/info",children:r.a.createElement(B,null)}))))}var A=function(e){Object(d.a)(t,e);var a=Object(i.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).state={boards:[],format:"card"},e}return Object(m.a)(t,[{key:"updateState",value:function(e,a){var t=this,n={};n["board_"+e]=a,this.setState(n),this.setState({boards:this.props.boardHosts.map((function(n,r){return e===r?a:t.state["board_"+r]||t.state.boards[r]}))})}},{key:"componentDidMount",value:function(){var e=this,a=(new Date).getTime();this.setState({boards:this.props.boardHosts.map((function(e,a){return{name:"Board "+(a+1),mac:"Loading...",ip:e.host,port:e.port}}))}),this.props.boardHosts.forEach((function(t,n){var r=t.host,l=t.port;fetch("http://"+r+":"+l+"/status").then((function(e){return e.json()})).then((function(t){var r=(new Date).getTime(),l=Object(c.a)({},t,{t:r-a,name:"Board "+(n+1)});e.updateState(n,l)})).catch((function(a){e.updateState(n,{name:"Board "+(n+1),mac:""+a,ip:r,port:l}),console.log(a)}))}))}},{key:"render",value:function(){return r.a.createElement(u.a,{basename:"/konnected"},r.a.createElement(j,{boards:this.state.boards}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(A,{boardHosts:[{host:"10.0.0.122",port:13682},{host:"10.0.0.60",port:22291},{host:"10.0.0.197",port:13681},{host:"10.0.0.62",port:22261}]})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[22,1,2]]]);
//# sourceMappingURL=main.9c96b3d4.chunk.js.map